# Generated by Django 6.0.1 on 2026-01-15 20:22

import django.contrib.auth.models
import django.contrib.auth.validators
import django.core.validators
import django.db.models.deletion
import django.utils.timezone
import school_app.models
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
    ]

    operations = [
        migrations.CreateModel(
            name='AcademicYear',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('year_code', models.CharField(max_length=9, unique=True)),
                ('year_name', models.CharField(max_length=50)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('is_current', models.BooleanField(default=False)),
            ],
            options={
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='AssessmentWindow',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('assessment_type', models.CharField(choices=[('Opener', 'Opener'), ('Mid-Term', 'Mid-Term'), ('End-Term', 'End-Term')], max_length=20)),
                ('weight_percentage', models.DecimalField(decimal_places=2, default=0, max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('open_date', models.DateField()),
                ('close_date', models.DateField()),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'ordering': ['term', 'open_date'],
            },
        ),
        migrations.CreateModel(
            name='Competency',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('competency_code', models.CharField(max_length=20)),
                ('competency_statement', models.TextField()),
                ('performance_indicator', models.TextField(blank=True, null=True)),
                ('is_core_competency', models.BooleanField(default=True)),
                ('display_order', models.IntegerField(default=0)),
            ],
            options={
                'ordering': ['substrand', 'display_order'],
            },
        ),
        migrations.CreateModel(
            name='DisciplineCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category_code', models.CharField(max_length=20, unique=True)),
                ('category_name', models.CharField(max_length=100)),
                ('severity_level', models.CharField(choices=[('Low', 'Low'), ('Medium', 'Medium'), ('High', 'High'), ('Critical', 'Critical')], max_length=10)),
                ('default_points', models.IntegerField(default=1, validators=[django.core.validators.MinValueValidator(0)])),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
        ),
        migrations.CreateModel(
            name='LearningArea',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('area_code', models.CharField(max_length=10, unique=True)),
                ('area_name', models.CharField(max_length=100)),
                ('short_name', models.CharField(blank=True, max_length=20, null=True)),
                ('area_type', models.CharField(choices=[('Core', 'Core'), ('Optional', 'Optional'), ('Extracurricular', 'Extracurricular')], max_length=20)),
                ('description', models.TextField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'ordering': ['area_code'],
            },
        ),
        migrations.CreateModel(
            name='User',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('password', models.CharField(max_length=128, verbose_name='password')),
                ('last_login', models.DateTimeField(blank=True, null=True, verbose_name='last login')),
                ('is_superuser', models.BooleanField(default=False, help_text='Designates that this user has all permissions without explicitly assigning them.', verbose_name='superuser status')),
                ('username', models.CharField(error_messages={'unique': 'A user with that username already exists.'}, help_text='Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.', max_length=150, unique=True, validators=[django.contrib.auth.validators.UnicodeUsernameValidator()], verbose_name='username')),
                ('first_name', models.CharField(blank=True, max_length=150, verbose_name='first name')),
                ('last_name', models.CharField(blank=True, max_length=150, verbose_name='last name')),
                ('email', models.EmailField(blank=True, max_length=254, verbose_name='email address')),
                ('is_staff', models.BooleanField(default=False, help_text='Designates whether the user can log into this admin site.', verbose_name='staff status')),
                ('is_active', models.BooleanField(default=True, help_text='Designates whether this user should be treated as active. Unselect this instead of deleting accounts.', verbose_name='active')),
                ('date_joined', models.DateTimeField(default=django.utils.timezone.now, verbose_name='date joined')),
                ('role', models.CharField(choices=[('system_admin', 'System Administrator'), ('principal', 'Principal'), ('deputy_principal', 'Deputy Principal'), ('director_studies', 'Director of Studies'), ('registrar', 'Registrar'), ('bursar', 'Bursar'), ('accountant', 'Accountant'), ('teacher', 'Teacher'), ('hr_manager', 'HR Manager'), ('student', 'Student'), ('parent', 'Parent')], max_length=30)),
                ('department', models.CharField(blank=True, max_length=50, null=True)),
                ('phone', models.CharField(blank=True, max_length=20, null=True)),
                ('mfa_enabled', models.BooleanField(default=False)),
                ('mfa_secret', models.CharField(blank=True, max_length=32, null=True)),
                ('last_password_change', models.DateTimeField(default=django.utils.timezone.now)),
                ('failed_attempts', models.IntegerField(default=0)),
                ('locked_until', models.DateTimeField(blank=True, null=True)),
                ('groups', models.ManyToManyField(blank=True, help_text='The groups this user belongs to. A user will get all permissions granted to each of their groups.', related_name='user_set', related_query_name='user', to='auth.group', verbose_name='groups')),
                ('user_permissions', models.ManyToManyField(blank=True, help_text='Specific permissions for this user.', related_name='user_set', related_query_name='user', to='auth.permission', verbose_name='user permissions')),
            ],
            managers=[
                ('objects', django.contrib.auth.models.UserManager()),
            ],
        ),
        migrations.CreateModel(
            name='AuditLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('event_time', models.DateTimeField(auto_now_add=True)),
                ('event_type', models.CharField(choices=[('USER_LOGIN', 'User Login'), ('USER_LOGOUT', 'User Logout'), ('USER_CREATE', 'User Create'), ('USER_UPDATE', 'User Update'), ('USER_DELETE', 'User Delete'), ('STUDENT_CREATE', 'Student Create'), ('STUDENT_UPDATE', 'Student Update'), ('STUDENT_DELETE', 'Student Delete'), ('FEE_CREATE', 'Fee Create'), ('FEE_UPDATE', 'Fee Update'), ('FEE_DELETE', 'Fee Delete'), ('PAYMENT_RECEIVED', 'Payment Received'), ('EXAM_CREATE', 'Exam Create'), ('EXAM_UPDATE', 'Exam Update'), ('MARKS_ENTERED', 'Marks Entered'), ('MARKS_MODIFIED', 'Marks Modified'), ('ATTENDANCE_MARKED', 'Attendance Marked'), ('DISCIPLINE_INCIDENT', 'Discipline Incident'), ('SYSTEM_BACKUP', 'System Backup'), ('SYSTEM_RESTORE', 'System Restore'), ('CONFIG_CHANGE', 'Config Change'), ('CBE_RATING_ENTERED', 'CBE Rating Entered'), ('CBE_REPORT_GENERATED', 'CBE Report Generated')], max_length=50)),
                ('username', models.CharField(blank=True, max_length=50, null=True)),
                ('user_role', models.CharField(blank=True, max_length=30, null=True)),
                ('table_name', models.CharField(max_length=50)),
                ('record_id', models.IntegerField(blank=True, null=True)),
                ('operation', models.CharField(blank=True, choices=[('INSERT', 'Insert'), ('UPDATE', 'Update'), ('DELETE', 'Delete'), ('SELECT', 'Select')], max_length=20, null=True)),
                ('old_values', models.JSONField(blank=True, null=True)),
                ('new_values', models.JSONField(blank=True, null=True)),
                ('changed_fields', models.JSONField(blank=True, default=list)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True, null=True)),
                ('endpoint', models.CharField(blank=True, max_length=255, null=True)),
                ('http_method', models.CharField(blank=True, max_length=10, null=True)),
                ('request_id', models.UUIDField(blank=True, null=True)),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='BackupHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('backup_type', models.CharField(choices=[('Full', 'Full'), ('Incremental', 'Incremental'), ('Differential', 'Differential'), ('Manual', 'Manual'), ('Scheduled', 'Scheduled')], max_length=20)),
                ('backup_name', models.CharField(max_length=100)),
                ('file_path', models.TextField()),
                ('file_size', models.BigIntegerField(blank=True, null=True)),
                ('database_version', models.CharField(blank=True, max_length=20, null=True)),
                ('backup_start', models.DateTimeField()),
                ('backup_end', models.DateTimeField(blank=True, null=True)),
                ('status', models.CharField(choices=[('Started', 'Started'), ('In Progress', 'In Progress'), ('Completed', 'Completed'), ('Failed', 'Failed'), ('Verified', 'Verified')], max_length=20)),
                ('verification_status', models.BooleanField(blank=True, null=True)),
                ('verification_time', models.DateTimeField(blank=True, null=True)),
                ('error_message', models.TextField(blank=True, null=True)),
                ('restore_point', models.BooleanField(default=False)),
                ('retention_days', models.IntegerField(default=30)),
                ('expires_on', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('initiated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='Class',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('class_code', models.CharField(max_length=10, unique=True)),
                ('class_name', models.CharField(max_length=50)),
                ('numeric_level', models.IntegerField()),
                ('stream', models.CharField(blank=True, max_length=20, null=True)),
                ('capacity', models.IntegerField(default=40, validators=[django.core.validators.MinValueValidator(1)])),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('class_teacher', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='classes_taught', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['numeric_level', 'stream'],
            },
        ),
        migrations.CreateModel(
            name='Course',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('course_code', models.CharField(max_length=20, unique=True)),
                ('course_title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True, null=True)),
                ('course_image', models.CharField(blank=True, max_length=255, null=True)),
                ('credit_hours', models.IntegerField(default=0)),
                ('duration_weeks', models.IntegerField(default=12)),
                ('is_published', models.BooleanField(default=False)),
                ('published_date', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('class_id', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='elearning_courses', to='school_app.class')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_courses', to=settings.AUTH_USER_MODEL)),
                ('learning_area', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='elearning_courses', to='school_app.learningarea')),
            ],
            options={
                'ordering': ['course_code'],
            },
        ),
        migrations.CreateModel(
            name='CourseModule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('module_title', models.CharField(max_length=200)),
                ('module_order', models.IntegerField(default=0)),
                ('description', models.TextField(blank=True, null=True)),
                ('learning_objectives', models.TextField(blank=True, null=True)),
                ('estimated_hours', models.IntegerField(default=2)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('competencies', models.ManyToManyField(blank=True, related_name='course_modules', to='school_app.competency')),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='modules', to='school_app.course')),
            ],
            options={
                'ordering': ['course', 'module_order'],
            },
        ),
        migrations.CreateModel(
            name='DiscussionForum',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('forum_title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('is_moderated', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='forums', to='school_app.course')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='FeeCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category_code', models.CharField(max_length=20, unique=True)),
                ('category_name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True, null=True)),
                ('frequency', models.CharField(choices=[('One-Time', 'One-Time'), ('Monthly', 'Monthly'), ('Termly', 'Termly'), ('Annual', 'Annual')], max_length=20)),
                ('is_mandatory', models.BooleanField(default=True)),
                ('is_active', models.BooleanField(default=True)),
                ('gl_account_code', models.CharField(blank=True, max_length=30, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='FeeStructure',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('academic_year', models.CharField(max_length=9)),
                ('term', models.CharField(choices=[('Term 1', 'Term 1'), ('Term 2', 'Term 2'), ('Term 3', 'Term 3')], max_length=20)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(0)])),
                ('due_date', models.DateField()),
                ('late_fee_percentage', models.DecimalField(decimal_places=2, default=0, max_digits=5, validators=[django.core.validators.MinValueValidator(0)])),
                ('late_fee_after_days', models.IntegerField(default=30)),
                ('installment_allowed', models.BooleanField(default=False)),
                ('max_installments', models.IntegerField(default=1)),
                ('discount_allowed', models.BooleanField(default=False)),
                ('max_discount_percentage', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('category', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='school_app.feecategory')),
                ('class_id', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='school_app.class')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='ForumPost',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('post_title', models.CharField(blank=True, max_length=200, null=True)),
                ('content', models.TextField()),
                ('is_pinned', models.BooleanField(default=False)),
                ('is_locked', models.BooleanField(default=False)),
                ('is_approved', models.BooleanField(default=True)),
                ('upvotes', models.IntegerField(default=0)),
                ('downvotes', models.IntegerField(default=0)),
                ('view_count', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('author', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='forum_posts', to=settings.AUTH_USER_MODEL)),
                ('forum', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='posts', to='school_app.discussionforum')),
                ('parent_post', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='replies', to='school_app.forumpost')),
            ],
            options={
                'ordering': ['-is_pinned', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='GeneralLedger',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('transaction_date', models.DateField(default=django.utils.timezone.now)),
                ('gl_date', models.DateField(default=django.utils.timezone.now)),
                ('account_code', models.CharField(max_length=30)),
                ('account_name', models.CharField(max_length=100)),
                ('debit_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('credit_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('description', models.TextField()),
                ('reference_no', models.CharField(blank=True, max_length=50, null=True)),
                ('reference_type', models.CharField(blank=True, max_length=30, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='Holiday',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('holiday_date', models.DateField(unique=True)),
                ('holiday_name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True, null=True)),
                ('holiday_type', models.CharField(choices=[('Public Holiday', 'Public Holiday'), ('School Holiday', 'School Holiday'), ('Exam Holiday', 'Exam Holiday'), ('Other', 'Other')], max_length=30)),
                ('is_working_day', models.BooleanField(default=False)),
                ('academic_year', models.CharField(blank=True, max_length=9, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='ClassSubjectAllocation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('academic_year', models.CharField(max_length=9)),
                ('periods_per_week', models.IntegerField(default=5, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('is_compulsory', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('class_id', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='school_app.class')),
                ('teacher', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='allocated_subjects', to=settings.AUTH_USER_MODEL)),
                ('subject', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='school_app.learningarea')),
            ],
        ),
        migrations.CreateModel(
            name='BookResource',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('isbn', models.CharField(blank=True, max_length=20, null=True, verbose_name='ISBN')),
                ('school_code', models.CharField(max_length=30, unique=True)),
                ('accession_number', models.CharField(max_length=30, unique=True)),
                ('title', models.CharField(max_length=200)),
                ('authors', models.CharField(max_length=300)),
                ('publisher', models.CharField(blank=True, max_length=100, null=True)),
                ('edition', models.CharField(blank=True, max_length=20, null=True)),
                ('year_of_publication', models.IntegerField(blank=True, null=True)),
                ('language', models.CharField(choices=[('English', 'English'), ('Kiswahili', 'Kiswahili'), ('French', 'French'), ('German', 'German'), ('Arabic', 'Arabic'), ('Other', 'Other')], default='English', max_length=20)),
                ('book_category', models.CharField(choices=[('Textbook', 'Textbook'), ('Storybook', 'Storybook'), ('Reference', 'Reference'), ('Teacher Guide', 'Teacher Guide'), ('Digital Resource', 'Digital Resource'), ('Journal', 'Journal'), ('Magazine', 'Magazine'), ('Newspaper', 'Newspaper'), ('Audio Book', 'Audio Book'), ('Video', 'Video')], max_length=30)),
                ('shelf_location', models.CharField(max_length=50)),
                ('call_number', models.CharField(blank=True, max_length=30, null=True)),
                ('pages', models.IntegerField(blank=True, null=True)),
                ('price', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('total_copies', models.IntegerField(default=1, validators=[django.core.validators.MinValueValidator(1)])),
                ('available_copies', models.IntegerField(default=1)),
                ('reserved_copies', models.IntegerField(default=0)),
                ('condition_status', models.CharField(choices=[('New', 'New'), ('Good', 'Good'), ('Worn', 'Worn'), ('Damaged', 'Damaged'), ('Lost', 'Lost')], default='Good', max_length=20)),
                ('digital_file_url', models.CharField(blank=True, max_length=255, null=True)),
                ('thumbnail_url', models.CharField(blank=True, max_length=255, null=True)),
                ('has_digital_version', models.BooleanField(default=False)),
                ('keywords', models.TextField(blank=True, null=True)),
                ('summary', models.TextField(blank=True, null=True)),
                ('table_of_contents', models.TextField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('is_reference_only', models.BooleanField(default=False)),
                ('added_date', models.DateField(default=django.utils.timezone.now)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('added_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='added_books', to=settings.AUTH_USER_MODEL)),
                ('grade_levels', models.ManyToManyField(blank=True, related_name='books', to='school_app.class')),
                ('subject', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='school_app.learningarea', verbose_name='Kenya CBE Learning Area')),
            ],
            options={
                'ordering': ['title'],
            },
        ),
        migrations.CreateModel(
            name='AttendanceSession',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('session_date', models.DateField(default=django.utils.timezone.now)),
                ('session_type', models.CharField(choices=[('Morning', 'Morning'), ('Afternoon', 'Afternoon'), ('Full Day', 'Full Day'), ('Evening', 'Evening')], max_length=20)),
                ('period_number', models.IntegerField(blank=True, null=True)),
                ('start_time', models.TimeField()),
                ('end_time', models.TimeField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('conducted_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='conducted_sessions', to=settings.AUTH_USER_MODEL)),
                ('class_id', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='school_app.class')),
                ('subject', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='school_app.learningarea')),
            ],
        ),
        migrations.CreateModel(
            name='LearningContent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('content_title', models.CharField(max_length=200)),
                ('content_type', models.CharField(choices=[('Video', 'Video'), ('Document', 'Document'), ('Presentation', 'Presentation'), ('Quiz', 'Quiz'), ('Assignment', 'Assignment'), ('Link', 'External Link'), ('Audio', 'Audio'), ('Image', 'Image')], max_length=20)),
                ('content_order', models.IntegerField(default=0)),
                ('description', models.TextField(blank=True, null=True)),
                ('content_url', models.CharField(blank=True, max_length=500, null=True)),
                ('file_path', models.CharField(blank=True, max_length=255, null=True)),
                ('file_size', models.BigIntegerField(blank=True, null=True)),
                ('duration_minutes', models.IntegerField(blank=True, null=True)),
                ('is_published', models.BooleanField(default=True)),
                ('publish_date', models.DateTimeField(auto_now_add=True)),
                ('requires_completion', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('module', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='contents', to='school_app.coursemodule')),
            ],
            options={
                'ordering': ['module', 'content_order'],
            },
        ),
        migrations.CreateModel(
            name='ELearningQuiz',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quiz_title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True, null=True)),
                ('time_limit_minutes', models.IntegerField(blank=True, null=True)),
                ('max_attempts', models.IntegerField(default=1)),
                ('passing_score', models.DecimalField(decimal_places=2, default=50, max_digits=5)),
                ('randomize_questions', models.BooleanField(default=False)),
                ('show_results', models.BooleanField(default=True)),
                ('is_published', models.BooleanField(default=True)),
                ('published_date', models.DateTimeField(auto_now_add=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('content', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='quiz', to='school_app.learningcontent')),
            ],
        ),
        migrations.CreateModel(
            name='Notification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('notification_type', models.CharField(max_length=50)),
                ('title', models.CharField(max_length=200)),
                ('message', models.TextField()),
                ('recipient_type', models.CharField(choices=[('User', 'User'), ('Role', 'Role'), ('Class', 'Class'), ('All', 'All')], max_length=20)),
                ('recipient_id', models.IntegerField(blank=True, null=True)),
                ('priority', models.CharField(choices=[('Low', 'Low'), ('Normal', 'Normal'), ('High', 'High'), ('Urgent', 'Urgent')], default='Normal', max_length=10)),
                ('status', models.CharField(choices=[('Unread', 'Unread'), ('Read', 'Read'), ('Archived', 'Archived')], default='Unread', max_length=20)),
                ('action_url', models.CharField(blank=True, max_length=255, null=True)),
                ('related_table', models.CharField(blank=True, max_length=50, null=True)),
                ('related_id', models.IntegerField(blank=True, null=True)),
                ('sent_at', models.DateTimeField(auto_now_add=True)),
                ('read_at', models.DateTimeField(blank=True, null=True)),
                ('expires_at', models.DateTimeField(blank=True, null=True)),
                ('sent_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='PasswordHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('password_hash', models.CharField(max_length=255)),
                ('changed_at', models.DateTimeField(auto_now_add=True)),
                ('changed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='changed_passwords', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='password_history', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='PayrollComponent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('component_code', models.CharField(max_length=20, unique=True)),
                ('component_name', models.CharField(max_length=100)),
                ('component_type', models.CharField(choices=[('Earning', 'Earning'), ('Deduction', 'Deduction'), ('Benefit', 'Benefit'), ('Allowance', 'Allowance')], max_length=20)),
                ('calculation_type', models.CharField(choices=[('Fixed Amount', 'Fixed Amount'), ('Percentage of Basic', 'Percentage of Basic'), ('Per Unit', 'Per Unit'), ('Formula', 'Formula')], max_length=30)),
                ('fixed_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('percentage_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('formula', models.TextField(blank=True, null=True)),
                ('is_taxable', models.BooleanField(default=True)),
                ('is_pensionable', models.BooleanField(default=True)),
                ('statutory_component', models.BooleanField(default=False)),
                ('frequency', models.CharField(choices=[('Monthly', 'Monthly'), ('One-Time', 'One-Time'), ('Annual', 'Annual'), ('Quarterly', 'Quarterly')], default='Monthly', max_length=20)),
                ('applies_to_all', models.BooleanField(default=False)),
                ('applies_to_staff_type', models.JSONField(blank=True, default=list)),
                ('min_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('max_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('max_percentage', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('gl_account_code', models.CharField(blank=True, max_length=30, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('effective_date', models.DateField(default=django.utils.timezone.now)),
                ('expiry_date', models.DateField(blank=True, null=True)),
                ('description', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_payroll_components', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='PayrollPeriod',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('period_code', models.CharField(max_length=30, unique=True)),
                ('period_name', models.CharField(max_length=100)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('pay_date', models.DateField()),
                ('status', models.CharField(choices=[('Draft', 'Draft'), ('Processing', 'Processing'), ('Calculated', 'Calculated'), ('Approved', 'Approved'), ('Paid', 'Paid'), ('Closed', 'Closed')], default='Draft', max_length=20)),
                ('total_staff', models.IntegerField(default=0)),
                ('processed_staff', models.IntegerField(default=0)),
                ('total_gross', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('total_deductions', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('total_net', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('total_paye', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('total_nssf', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('total_nhif', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('processed_date', models.DateTimeField(blank=True, null=True)),
                ('approved_date', models.DateTimeField(blank=True, null=True)),
                ('closed_date', models.DateTimeField(blank=True, null=True)),
                ('is_locked', models.BooleanField(default=False)),
                ('locked_date', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_payroll_periods', to=settings.AUTH_USER_MODEL)),
                ('closed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='closed_payroll_periods', to=settings.AUTH_USER_MODEL)),
                ('locked_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='locked_payroll_periods', to=settings.AUTH_USER_MODEL)),
                ('processed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='processed_payroll_periods', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='QuizQuestion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('question_text', models.TextField()),
                ('question_type', models.CharField(choices=[('MCQ', 'Multiple Choice'), ('TrueFalse', 'True/False'), ('ShortAnswer', 'Short Answer'), ('Essay', 'Essay'), ('Matching', 'Matching')], default='MCQ', max_length=20)),
                ('question_order', models.IntegerField(default=0)),
                ('points', models.DecimalField(decimal_places=2, default=1, max_digits=5)),
                ('options', models.JSONField(blank=True, default=list)),
                ('correct_answer', models.TextField(blank=True, null=True)),
                ('explanation', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('quiz', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='questions', to='school_app.elearningquiz')),
            ],
            options={
                'ordering': ['quiz', 'question_order'],
            },
        ),
        migrations.CreateModel(
            name='Staff',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('staff_id', models.CharField(max_length=30, unique=True)),
                ('title', models.CharField(blank=True, max_length=10, null=True)),
                ('first_name', models.CharField(max_length=50)),
                ('middle_name', models.CharField(blank=True, max_length=50, null=True)),
                ('last_name', models.CharField(max_length=50)),
                ('date_of_birth', models.DateField()),
                ('gender', models.CharField(choices=[('Male', 'Male'), ('Female', 'Female'), ('Other', 'Other')], max_length=10)),
                ('marital_status', models.CharField(blank=True, choices=[('Single', 'Single'), ('Married', 'Married'), ('Divorced', 'Divorced'), ('Widowed', 'Widowed')], max_length=20, null=True)),
                ('personal_email', models.EmailField(blank=True, max_length=254, null=True)),
                ('personal_phone', models.CharField(blank=True, max_length=20, null=True)),
                ('emergency_contact', models.CharField(max_length=20)),
                ('emergency_contact_name', models.CharField(max_length=100)),
                ('emergency_relation', models.CharField(blank=True, max_length=30, null=True)),
                ('permanent_address', models.TextField(blank=True, null=True)),
                ('temporary_address', models.TextField(blank=True, null=True)),
                ('city', models.CharField(blank=True, max_length=50, null=True)),
                ('country', models.CharField(default='Kenya', max_length=50)),
                ('national_id', models.CharField(blank=True, max_length=20, null=True, unique=True)),
                ('passport_no', models.CharField(blank=True, max_length=20, null=True, unique=True)),
                ('kra_pin', models.CharField(blank=True, max_length=20, null=True)),
                ('nssf_no', models.CharField(blank=True, max_length=20, null=True)),
                ('nhif_no', models.CharField(blank=True, max_length=20, null=True)),
                ('employment_type', models.CharField(choices=[('Permanent', 'Permanent'), ('Contract', 'Contract'), ('Probation', 'Probation'), ('Part-time', 'Part-time'), ('Intern', 'Intern')], max_length=20)),
                ('employment_date', models.DateField()),
                ('confirmation_date', models.DateField(blank=True, null=True)),
                ('contract_end_date', models.DateField(blank=True, null=True)),
                ('department', models.CharField(max_length=50)),
                ('designation', models.CharField(max_length=50)),
                ('job_grade', models.CharField(blank=True, max_length=10, null=True)),
                ('highest_qualification', models.CharField(blank=True, max_length=100, null=True)),
                ('specialization', models.TextField(blank=True, null=True)),
                ('university', models.CharField(blank=True, max_length=100, null=True)),
                ('year_of_graduation', models.IntegerField(blank=True, null=True)),
                ('bank_name', models.CharField(blank=True, max_length=100, null=True)),
                ('bank_branch', models.CharField(blank=True, max_length=100, null=True)),
                ('account_name', models.CharField(blank=True, max_length=100, null=True)),
                ('account_number', models.CharField(blank=True, max_length=30, null=True)),
                ('basic_salary', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, validators=[django.core.validators.MinValueValidator(0)])),
                ('salary_currency', models.CharField(default='KES', max_length=3)),
                ('payment_mode', models.CharField(blank=True, choices=[('Bank Transfer', 'Bank Transfer'), ('Cheque', 'Cheque'), ('Cash', 'Cash')], max_length=20, null=True)),
                ('status', models.CharField(choices=[('Active', 'Active'), ('On Leave', 'On Leave'), ('Suspended', 'Suspended'), ('Resigned', 'Resigned'), ('Terminated', 'Terminated'), ('Retired', 'Retired'), ('Deceased', 'Deceased')], default='Active', max_length=20)),
                ('status_date', models.DateField(blank=True, null=True)),
                ('status_reason', models.TextField(blank=True, null=True)),
                ('exit_interview_conducted', models.BooleanField(default=False)),
                ('exit_interview_notes', models.TextField(blank=True, null=True)),
                ('photo_url', models.CharField(blank=True, max_length=255, null=True)),
                ('documents', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('archived', models.BooleanField(default=False)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_staff', to=settings.AUTH_USER_MODEL)),
                ('reporting_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='subordinates', to='school_app.staff')),
                ('updated_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='updated_staff', to=settings.AUTH_USER_MODEL)),
                ('user', models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='staff_profile', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='PayrollRecord',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('basic_salary', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('allowances_total', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('overtime_total', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('bonus_total', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('other_earnings', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('gross_salary', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('paye_tax', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('nssf_deduction', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('nhif_deduction', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('pension_deduction', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('loan_deductions', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('other_deductions', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_deductions', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('net_salary', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('payment_status', models.CharField(choices=[('Pending', 'Pending'), ('Paid', 'Paid'), ('Partially Paid', 'Partially Paid'), ('On Hold', 'On Hold')], default='Pending', max_length=20)),
                ('payment_method', models.CharField(blank=True, choices=[('Bank Transfer', 'Bank Transfer'), ('Cheque', 'Cheque'), ('Cash', 'Cash'), ('Mobile Money', 'Mobile Money')], max_length=20, null=True)),
                ('payment_reference', models.CharField(blank=True, max_length=100, null=True)),
                ('payment_date', models.DateField(blank=True, null=True)),
                ('bank_account', models.CharField(blank=True, max_length=50, null=True)),
                ('allowances_breakdown', models.JSONField(blank=True, default=list)),
                ('deductions_breakdown', models.JSONField(blank=True, default=list)),
                ('days_worked', models.IntegerField(default=0)),
                ('days_absent', models.IntegerField(default=0)),
                ('leave_days', models.IntegerField(default=0)),
                ('overtime_hours', models.DecimalField(decimal_places=2, default=0, max_digits=6)),
                ('taxable_income', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('pensionable_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('is_calculated', models.BooleanField(default=False)),
                ('is_approved', models.BooleanField(default=False)),
                ('is_paid', models.BooleanField(default=False)),
                ('approved_date', models.DateTimeField(blank=True, null=True)),
                ('calculated_date', models.DateTimeField(blank=True, null=True)),
                ('paid_date', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_payroll_records', to=settings.AUTH_USER_MODEL)),
                ('calculated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='calculated_payroll_records', to=settings.AUTH_USER_MODEL)),
                ('paid_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='paid_payroll_records', to=settings.AUTH_USER_MODEL)),
                ('payroll_period', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='records', to='school_app.payrollperiod')),
                ('staff', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payroll_records', to='school_app.staff')),
            ],
        ),
        migrations.CreateModel(
            name='LeaveBalance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('leave_year', models.IntegerField()),
                ('leave_type', models.CharField(max_length=30)),
                ('total_entitled', models.IntegerField(default=0)),
                ('taken_so_far', models.IntegerField(default=0)),
                ('balance', models.IntegerField(default=0)),
                ('carried_over', models.IntegerField(default=0)),
                ('expires_on', models.DateField(blank=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('staff', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='leave_balances', to='school_app.staff')),
            ],
        ),
        migrations.CreateModel(
            name='StaffLeave',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('leave_type', models.CharField(choices=[('Annual', 'Annual'), ('Sick', 'Sick'), ('Maternity', 'Maternity'), ('Paternity', 'Paternity'), ('Study', 'Study'), ('Compassionate', 'Compassionate'), ('Unpaid', 'Unpaid')], max_length=30)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('total_days', models.IntegerField(default=0)),
                ('reason', models.TextField()),
                ('contact_during_leave', models.CharField(blank=True, max_length=20, null=True)),
                ('status', models.CharField(choices=[('Pending', 'Pending'), ('Approved', 'Approved'), ('Rejected', 'Rejected'), ('Cancelled', 'Cancelled')], default='Pending', max_length=20)),
                ('applied_date', models.DateField(default=django.utils.timezone.now)),
                ('approved_date', models.DateField(blank=True, null=True)),
                ('rejection_reason', models.TextField(blank=True, null=True)),
                ('handover_notes', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_leaves', to=settings.AUTH_USER_MODEL)),
                ('handover_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='handover_leaves', to='school_app.staff')),
                ('staff', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='leaves', to='school_app.staff')),
            ],
        ),
        migrations.CreateModel(
            name='StaffLoan',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('loan_id', models.CharField(default=school_app.models.generate_inc_id, max_length=30, unique=True)),
                ('loan_type', models.CharField(choices=[('Emergency', 'Emergency'), ('Salary Advance', 'Salary Advance'), ('Housing', 'Housing'), ('Vehicle', 'Vehicle'), ('Education', 'Education'), ('Other', 'Other')], max_length=30)),
                ('loan_amount', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(1)])),
                ('interest_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('interest_type', models.CharField(choices=[('Flat', 'Flat'), ('Reducing', 'Reducing')], default='Flat', max_length=20)),
                ('repayment_months', models.IntegerField(default=12)),
                ('monthly_installment', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('status', models.CharField(choices=[('Pending', 'Pending'), ('Approved', 'Approved'), ('Disbursed', 'Disbursed'), ('Active', 'Active'), ('Settled', 'Settled'), ('Defaulted', 'Defaulted'), ('Written Off', 'Written Off')], default='Pending', max_length=20)),
                ('approved_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('disbursed_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('disbursement_date', models.DateField(blank=True, null=True)),
                ('disbursement_method', models.CharField(blank=True, max_length=30, null=True)),
                ('total_paid', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_interest_paid', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_principal_paid', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('outstanding_balance', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('overdue_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('overdue_days', models.IntegerField(default=0)),
                ('applied_date', models.DateField(default=django.utils.timezone.now)),
                ('approved_date', models.DateField(blank=True, null=True)),
                ('rejection_reason', models.TextField(blank=True, null=True)),
                ('guarantor_name', models.CharField(blank=True, max_length=100, null=True)),
                ('guarantor_contact', models.CharField(blank=True, max_length=20, null=True)),
                ('security_details', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_staff_loans', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_staff_loans', to=settings.AUTH_USER_MODEL)),
                ('staff', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='loans', to='school_app.staff')),
            ],
        ),
        migrations.CreateModel(
            name='LoanRepayment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('repayment_date', models.DateField(default=django.utils.timezone.now)),
                ('amount_paid', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(0.01)])),
                ('principal_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('interest_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('payment_method', models.CharField(choices=[('Salary Deduction', 'Salary Deduction'), ('Bank Transfer', 'Bank Transfer'), ('Cash', 'Cash'), ('Cheque', 'Cheque'), ('Mobile Money', 'Mobile Money')], max_length=20)),
                ('payment_reference', models.CharField(blank=True, max_length=100, null=True)),
                ('is_overdue', models.BooleanField(default=False)),
                ('overdue_days', models.IntegerField(default=0)),
                ('processed_date', models.DateTimeField(default=django.utils.timezone.now)),
                ('remarks', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('processed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='processed_loan_repayments', to=settings.AUTH_USER_MODEL)),
                ('loan', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='repayments', to='school_app.staffloan')),
            ],
        ),
        migrations.CreateModel(
            name='StaffPayrollComponent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('custom_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('custom_percentage', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('custom_formula', models.TextField(blank=True, null=True)),
                ('effective_from', models.DateField(default=django.utils.timezone.now)),
                ('effective_to', models.DateField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('approved_date', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_staff_components', to=settings.AUTH_USER_MODEL)),
                ('component', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='staff_components', to='school_app.payrollcomponent')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_staff_payroll_components', to=settings.AUTH_USER_MODEL)),
                ('staff', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payroll_components', to='school_app.staff')),
            ],
        ),
        migrations.CreateModel(
            name='Strand',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('strand_code', models.CharField(max_length=10)),
                ('strand_name', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True, null=True)),
                ('display_order', models.IntegerField(default=0)),
                ('learning_area', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='strands', to='school_app.learningarea')),
            ],
            options={
                'ordering': ['learning_area', 'display_order'],
            },
        ),
        migrations.CreateModel(
            name='Student',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('admission_no', models.CharField(max_length=30, unique=True)),
                ('student_uid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('first_name', models.CharField(max_length=50)),
                ('middle_name', models.CharField(blank=True, max_length=50, null=True)),
                ('last_name', models.CharField(max_length=50)),
                ('date_of_birth', models.DateField()),
                ('gender', models.CharField(choices=[('Male', 'Male'), ('Female', 'Female'), ('Other', 'Other')], max_length=10)),
                ('nationality', models.CharField(default='Kenya', max_length=50)),
                ('religion', models.CharField(blank=True, max_length=30, null=True)),
                ('blood_group', models.CharField(blank=True, max_length=5, null=True)),
                ('address', models.TextField(validators=[django.core.validators.RegexValidator(message='Address must be at least 10 characters', regex='.{10,}')])),
                ('city', models.CharField(max_length=50)),
                ('country', models.CharField(default='Kenya', max_length=50)),
                ('phone', models.CharField(blank=True, max_length=20, null=True, validators=[django.core.validators.RegexValidator(regex='^\\+?[0-9\\s\\-\\(\\)]+$')])),
                ('email', models.EmailField(blank=True, max_length=254, null=True)),
                ('current_section', models.CharField(blank=True, max_length=10, null=True)),
                ('stream', models.CharField(blank=True, max_length=20, null=True)),
                ('roll_number', models.IntegerField(blank=True, null=True)),
                ('admission_date', models.DateField(default=django.utils.timezone.now)),
                ('admission_type', models.CharField(choices=[('Regular', 'Regular'), ('Transfer', 'Transfer'), ('Re-admission', 'Re-admission')], default='Regular', max_length=20)),
                ('status', models.CharField(choices=[('Active', 'Active'), ('Graduated', 'Graduated'), ('Transferred', 'Transferred'), ('Withdrawn', 'Withdrawn'), ('Suspended', 'Suspended')], default='Active', max_length=20)),
                ('status_reason', models.TextField(blank=True, null=True)),
                ('status_changed_date', models.DateField(blank=True, null=True)),
                ('expected_graduation_date', models.DateField(blank=True, null=True)),
                ('father_name', models.CharField(blank=True, max_length=100, null=True)),
                ('father_phone', models.CharField(blank=True, max_length=20, null=True)),
                ('father_email', models.EmailField(blank=True, max_length=254, null=True)),
                ('father_occupation', models.CharField(blank=True, max_length=50, null=True)),
                ('mother_name', models.CharField(blank=True, max_length=100, null=True)),
                ('mother_phone', models.CharField(blank=True, max_length=20, null=True)),
                ('mother_email', models.EmailField(blank=True, max_length=254, null=True)),
                ('mother_occupation', models.CharField(blank=True, max_length=50, null=True)),
                ('guardian_name', models.CharField(max_length=100)),
                ('guardian_relation', models.CharField(max_length=30)),
                ('guardian_phone', models.CharField(max_length=20)),
                ('guardian_email', models.EmailField(blank=True, max_length=254, null=True)),
                ('guardian_address', models.TextField(blank=True, null=True)),
                ('medical_conditions', models.TextField(blank=True, null=True)),
                ('allergies', models.TextField(blank=True, null=True)),
                ('medication', models.TextField(blank=True, null=True)),
                ('emergency_contact', models.CharField(max_length=20)),
                ('emergency_contact_name', models.CharField(max_length=100)),
                ('previous_school', models.CharField(blank=True, max_length=100, null=True)),
                ('previous_class', models.CharField(blank=True, max_length=20, null=True)),
                ('transfer_certificate_no', models.CharField(blank=True, max_length=50, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('archived', models.BooleanField(default=False)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='created_students', to=settings.AUTH_USER_MODEL)),
                ('current_class', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='current_students', to='school_app.class')),
                ('updated_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='updated_students', to=settings.AUTH_USER_MODEL)),
                ('user', models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='student_profile', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='Parent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('parent_id', models.CharField(max_length=30, unique=True)),
                ('first_name', models.CharField(max_length=50)),
                ('middle_name', models.CharField(blank=True, max_length=50, null=True)),
                ('last_name', models.CharField(max_length=50)),
                ('relation_to_student', models.CharField(max_length=30)),
                ('phone', models.CharField(max_length=20)),
                ('email', models.EmailField(blank=True, max_length=254, null=True)),
                ('occupation', models.CharField(blank=True, max_length=50, null=True)),
                ('address', models.TextField()),
                ('city', models.CharField(max_length=50)),
                ('country', models.CharField(default='Kenya', max_length=50)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='parent_profile', to=settings.AUTH_USER_MODEL)),
                ('students', models.ManyToManyField(related_name='parents', to='school_app.student')),
            ],
        ),
        migrations.CreateModel(
            name='FeeTransaction',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('transaction_no', models.CharField(default=school_app.models.generate_txn_id, max_length=30, unique=True)),
                ('payment_date', models.DateTimeField(default=django.utils.timezone.now)),
                ('payment_mode', models.CharField(choices=[('Cash', 'Cash'), ('Cheque', 'Cheque'), ('Bank Transfer', 'Bank Transfer'), ('Mobile Money', 'Mobile Money'), ('Credit Card', 'Credit Card')], max_length=20)),
                ('payment_reference', models.CharField(blank=True, max_length=100, null=True)),
                ('bank_name', models.CharField(blank=True, max_length=100, null=True)),
                ('cheque_no', models.CharField(blank=True, max_length=50, null=True)),
                ('mobile_money_no', models.CharField(blank=True, max_length=20, null=True)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(0.01)])),
                ('currency', models.CharField(choices=[('KES', 'KES'), ('USD', 'USD'), ('EUR', 'EUR')], default='KES', max_length=3)),
                ('exchange_rate', models.DecimalField(decimal_places=4, default=1, max_digits=10)),
                ('amount_kes', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('status', models.CharField(choices=[('Pending', 'Pending'), ('Completed', 'Completed'), ('Failed', 'Failed'), ('Reversed', 'Reversed')], default='Completed', max_length=20)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('reversal_reason', models.TextField(blank=True, null=True)),
                ('reversed_at', models.DateTimeField(blank=True, null=True)),
                ('receipt_printed', models.BooleanField(default=False)),
                ('receipt_printed_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('collected_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='collected_transactions', to=settings.AUTH_USER_MODEL)),
                ('receipt_printed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='printed_receipts', to=settings.AUTH_USER_MODEL)),
                ('reversed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reversed_transactions', to=settings.AUTH_USER_MODEL)),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_transactions', to=settings.AUTH_USER_MODEL)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='fee_transactions', to='school_app.student')),
            ],
        ),
        migrations.CreateModel(
            name='DisciplineIncident',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('incident_code', models.CharField(default=school_app.models.generate_inc_id, max_length=30, unique=True)),
                ('incident_date', models.DateField(default=django.utils.timezone.now)),
                ('incident_time', models.TimeField(default=django.utils.timezone.now)),
                ('description', models.TextField()),
                ('location', models.CharField(blank=True, max_length=100, null=True)),
                ('witnesses', models.TextField(blank=True, null=True)),
                ('evidence_urls', models.JSONField(blank=True, default=list)),
                ('status', models.CharField(choices=[('Reported', 'Reported'), ('Under Investigation', 'Under Investigation'), ('Resolved', 'Resolved'), ('Escalated', 'Escalated'), ('Closed', 'Closed')], default='Reported', max_length=20)),
                ('investigation_notes', models.TextField(blank=True, null=True)),
                ('resolution', models.TextField(blank=True, null=True)),
                ('resolution_date', models.DateField(blank=True, null=True)),
                ('points_awarded', models.IntegerField(validators=[django.core.validators.MinValueValidator(0)])),
                ('parent_notified', models.BooleanField(default=False)),
                ('parent_notification_date', models.DateField(blank=True, null=True)),
                ('parent_response', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('closed_at', models.DateTimeField(blank=True, null=True)),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_incidents', to=settings.AUTH_USER_MODEL)),
                ('category', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='school_app.disciplinecategory')),
                ('closed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='closed_incidents', to=settings.AUTH_USER_MODEL)),
                ('reported_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='reported_incidents', to=settings.AUTH_USER_MODEL)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='discipline_incidents', to='school_app.student')),
            ],
        ),
        migrations.CreateModel(
            name='CBEReportCard',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('report_id', models.CharField(default=school_app.models.generate_report_id, max_length=30, unique=True)),
                ('report_type', models.CharField(choices=[('Learner Progress Report', 'Learner Progress Report'), ('Parent Summary Report', 'Parent Summary Report'), ('Teacher Class Performance Report', 'Teacher Class Performance Report'), ('School-Wide CBE Report', 'School-Wide CBE Report')], max_length=50)),
                ('academic_year', models.CharField(max_length=9)),
                ('term', models.CharField(max_length=20)),
                ('reporting_date', models.DateField(default=django.utils.timezone.now)),
                ('learner_photo_url', models.CharField(blank=True, max_length=255, null=True)),
                ('learner_attendance_summary', models.TextField(blank=True, null=True)),
                ('learning_area_performance', models.JSONField(default=list)),
                ('competency_summary', models.JSONField(default=dict)),
                ('core_competencies', models.JSONField(default=list)),
                ('values_assessment', models.JSONField(default=list)),
                ('teacher_remarks', models.TextField(blank=True, null=True)),
                ('head_teacher_remarks', models.TextField(blank=True, null=True)),
                ('head_teacher_signature', models.CharField(blank=True, max_length=100, null=True)),
                ('parent_feedback_section', models.TextField(blank=True, null=True)),
                ('parent_signature', models.CharField(blank=True, max_length=100, null=True)),
                ('parent_date', models.DateField(blank=True, null=True)),
                ('generated_date', models.DateTimeField(default=django.utils.timezone.now)),
                ('is_published', models.BooleanField(default=False)),
                ('published_date', models.DateTimeField(blank=True, null=True)),
                ('is_printed', models.BooleanField(default=False)),
                ('printed_date', models.DateTimeField(blank=True, null=True)),
                ('report_file_url', models.CharField(blank=True, max_length=255, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('generated_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='generated_cbe_reports', to=settings.AUTH_USER_MODEL)),
                ('teacher', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='cbe_report_cards', to=settings.AUTH_USER_MODEL)),
                ('class_id', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='cbe_report_cards', to='school_app.class')),
                ('student', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='cbe_report_cards', to='school_app.student')),
            ],
        ),
        migrations.CreateModel(
            name='StudentAcademicHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('academic_year', models.CharField(max_length=9)),
                ('section', models.CharField(blank=True, max_length=10, null=True)),
                ('stream', models.CharField(blank=True, max_length=20, null=True)),
                ('roll_number', models.IntegerField(blank=True, null=True)),
                ('promoted', models.BooleanField(default=False)),
                ('promotion_date', models.DateField(blank=True, null=True)),
                ('remarks', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('class_id', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='school_app.class')),
                ('class_teacher', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='academic_history', to='school_app.student')),
            ],
        ),
        migrations.CreateModel(
            name='StudentAttendance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('attendance_status', models.CharField(choices=[('Present', 'Present'), ('Absent', 'Absent'), ('Late', 'Late'), ('Excused', 'Excused'), ('Half-day', 'Half-day')], max_length=15)),
                ('check_in_time', models.DateTimeField(blank=True, null=True)),
                ('check_out_time', models.DateTimeField(blank=True, null=True)),
                ('late_minutes', models.IntegerField(default=0)),
                ('remarks', models.TextField(blank=True, null=True)),
                ('recorded_at', models.DateTimeField(auto_now_add=True)),
                ('recorded_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('session', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attendance_records', to='school_app.attendancesession')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attendance_records', to='school_app.student')),
            ],
        ),
        migrations.CreateModel(
            name='StudentCredit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('credit_amount', models.DecimalField(decimal_places=2, max_digits=12)),
                ('credit_type', models.CharField(choices=[('EXCESS_PAYMENT', 'Excess Payment'), ('REFUND', 'Refund'), ('ADJUSTMENT', 'Adjustment'), ('DISCOUNT', 'Discount')], max_length=20)),
                ('credit_date', models.DateField(default=django.utils.timezone.now)),
                ('credit_expiry', models.DateField()),
                ('is_utilized', models.BooleanField(default=False)),
                ('utilized_date', models.DateField(blank=True, null=True)),
                ('academic_year', models.CharField(blank=True, max_length=9, null=True)),
                ('term', models.CharField(blank=True, max_length=20, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('original_transaction', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='original_credits', to='school_app.feetransaction')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='credits', to='school_app.student')),
                ('utilized_for_transaction', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='utilized_credits', to='school_app.feetransaction')),
            ],
            options={
                'ordering': ['-credit_date'],
            },
        ),
        migrations.CreateModel(
            name='StudentDisciplinePoints',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('academic_year', models.CharField(max_length=9)),
                ('term', models.CharField(max_length=20)),
                ('total_points', models.IntegerField(default=0, validators=[django.core.validators.MinValueValidator(0)])),
                ('warnings_count', models.IntegerField(default=0)),
                ('suspensions_count', models.IntegerField(default=0)),
                ('last_incident_date', models.DateField(blank=True, null=True)),
                ('current_status', models.CharField(choices=[('Excellent', 'Excellent'), ('Good', 'Good'), ('Warning', 'Warning'), ('Probation', 'Probation'), ('Suspension', 'Suspension')], default='Good', max_length=20)),
                ('remarks', models.TextField(blank=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='discipline_points', to='school_app.student')),
            ],
        ),
        migrations.CreateModel(
            name='StudentEnrollment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('enrollment_date', models.DateTimeField(auto_now_add=True)),
                ('enrollment_status', models.CharField(choices=[('Active', 'Active'), ('Completed', 'Completed'), ('Dropped', 'Dropped'), ('Suspended', 'Suspended')], default='Active', max_length=20)),
                ('progress_percentage', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('last_accessed', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('final_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='enrollments', to='school_app.course')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='elearning_enrollments', to='school_app.student')),
            ],
        ),
        migrations.CreateModel(
            name='QuizAttempt',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('attempt_number', models.IntegerField(default=1)),
                ('started_at', models.DateTimeField(auto_now_add=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('score', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('max_score', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('percentage', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('is_passed', models.BooleanField(default=False)),
                ('responses', models.JSONField(blank=True, default=dict)),
                ('quiz', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attempts', to='school_app.elearningquiz')),
                ('enrollment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='quiz_attempts', to='school_app.studentenrollment')),
            ],
        ),
        migrations.CreateModel(
            name='ContentProgress',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_completed', models.BooleanField(default=False)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('time_spent_minutes', models.IntegerField(default=0)),
                ('last_accessed', models.DateTimeField(auto_now=True)),
                ('score', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('max_score', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('attempts', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('content', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='student_progress', to='school_app.learningcontent')),
                ('enrollment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='content_progress', to='school_app.studentenrollment')),
            ],
        ),
        migrations.CreateModel(
            name='StudentFeeInvoice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('invoice_no', models.CharField(default=school_app.models.generate_inv_id, max_length=30, unique=True)),
                ('academic_year', models.CharField(max_length=9)),
                ('term', models.CharField(max_length=20)),
                ('invoice_date', models.DateField(default=django.utils.timezone.now)),
                ('due_date', models.DateField()),
                ('subtotal', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('discount_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('late_fee_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('amount_paid', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('balance_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('status', models.CharField(choices=[('Pending', 'Pending'), ('Partial', 'Partial'), ('Paid', 'Paid'), ('Overdue', 'Overdue'), ('Cancelled', 'Cancelled')], default='Pending', max_length=20)),
                ('payment_status', models.CharField(choices=[('Unpaid', 'Unpaid'), ('Partially Paid', 'Partially Paid'), ('Fully Paid', 'Fully Paid')], default='Unpaid', max_length=20)),
                ('cancelled_at', models.DateTimeField(blank=True, null=True)),
                ('cancellation_reason', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('cancelled_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cancelled_invoices', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_invoices', to=settings.AUTH_USER_MODEL)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='invoices', to='school_app.student')),
            ],
        ),
        migrations.CreateModel(
            name='InvoiceItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('description', models.CharField(max_length=200)),
                ('quantity', models.IntegerField(default=1, validators=[django.core.validators.MinValueValidator(1)])),
                ('unit_price', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(0)])),
                ('amount', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('discount_percentage', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('discount_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('net_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('fee_structure', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='school_app.feestructure')),
                ('invoice', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='school_app.studentfeeinvoice')),
            ],
        ),
        migrations.AddField(
            model_name='feetransaction',
            name='invoice',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='transactions', to='school_app.studentfeeinvoice'),
        ),
        migrations.CreateModel(
            name='SubStrand',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('substrand_code', models.CharField(max_length=15)),
                ('substrand_name', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True, null=True)),
                ('display_order', models.IntegerField(default=0)),
                ('strand', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='substrands', to='school_app.strand')),
            ],
            options={
                'ordering': ['strand', 'display_order'],
            },
        ),
        migrations.AddField(
            model_name='competency',
            name='substrand',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='competencies', to='school_app.substrand'),
        ),
        migrations.CreateModel(
            name='SummativeAssessment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('assessment_code', models.CharField(default=school_app.models.generate_assessment_code, max_length=30, unique=True)),
                ('status', models.CharField(choices=[('Draft', 'Draft'), ('Published', 'Published'), ('Locked', 'Locked'), ('Archived', 'Archived')], default='Draft', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('assessment_window', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='assessments', to='school_app.assessmentwindow')),
                ('class_id', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='summative_assessments', to='school_app.class')),
                ('competencies', models.ManyToManyField(blank=True, related_name='summative_assessments', to='school_app.competency')),
                ('learning_area', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cbe_assessments', to='school_app.learningarea')),
                ('teacher', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='created_summative_assessments', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='SummativeRating',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('rating', models.CharField(choices=[('BE', 'Below Expectation (0-39%)'), ('AE', 'Approaching Expectation (40-59%)'), ('ME', 'Meeting Expectation (60-79%)'), ('EE', 'Exceeding Expectation (80-100%)')], max_length=2)),
                ('teacher_comment', models.TextField(blank=True, null=True)),
                ('internal_value', models.IntegerField(default=0)),
                ('rated_at', models.DateTimeField(auto_now_add=True)),
                ('modified_at', models.DateTimeField(auto_now=True)),
                ('assessment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ratings', to='school_app.summativeassessment')),
                ('competency', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='student_ratings', to='school_app.competency')),
                ('rated_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='given_ratings', to=settings.AUTH_USER_MODEL)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='summative_ratings', to='school_app.student')),
            ],
        ),
        migrations.CreateModel(
            name='SystemSetting',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('setting_key', models.CharField(max_length=100, unique=True)),
                ('setting_value', models.TextField()),
                ('setting_type', models.CharField(choices=[('String', 'String'), ('Number', 'Number'), ('Boolean', 'Boolean'), ('JSON', 'JSON'), ('Encrypted', 'Encrypted')], max_length=20)),
                ('category', models.CharField(default='General', max_length=50)),
                ('description', models.TextField(blank=True, null=True)),
                ('is_public', models.BooleanField(default=False)),
                ('is_encrypted', models.BooleanField(default=False)),
                ('encrypted_value', models.BinaryField(blank=True, null=True)),
                ('min_value', models.TextField(blank=True, null=True)),
                ('max_value', models.TextField(blank=True, null=True)),
                ('validation_regex', models.TextField(blank=True, null=True)),
                ('options', models.JSONField(blank=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('requires_restart', models.BooleanField(default=False)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='Term',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('term', models.CharField(choices=[('Term 1', 'Term 1'), ('Term 2', 'Term 2'), ('Term 3', 'Term 3')], max_length=10)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('is_current', models.BooleanField(default=False)),
                ('academic_year', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='terms', to='school_app.academicyear')),
            ],
            options={
                'ordering': ['academic_year', 'term'],
            },
        ),
        migrations.AddField(
            model_name='assessmentwindow',
            name='term',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='assessment_windows', to='school_app.term'),
        ),
        migrations.CreateModel(
            name='TermlySummary',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('opener_weighted', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('midterm_weighted', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('endterm_weighted', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('final_internal_value', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('final_rating', models.CharField(blank=True, choices=[('BE', 'Below Expectation (0-39%)'), ('AE', 'Approaching Expectation (40-59%)'), ('ME', 'Meeting Expectation (60-79%)'), ('EE', 'Exceeding Expectation (80-100%)')], max_length=2, null=True)),
                ('total_competencies', models.IntegerField(default=0)),
                ('be_count', models.IntegerField(default=0)),
                ('ae_count', models.IntegerField(default=0)),
                ('me_count', models.IntegerField(default=0)),
                ('ee_count', models.IntegerField(default=0)),
                ('flags', models.JSONField(blank=True, default=list)),
                ('progression_status', models.CharField(choices=[('Ready', 'Ready'), ('Needs Support', 'Needs Support'), ('Intervention Required', 'Intervention Required')], default='Under Review', max_length=30)),
                ('promotion_status', models.CharField(choices=[('Promoted', 'Promoted'), ('Retained', 'Retained'), ('Under Review', 'Under Review')], default='Under Review', max_length=30)),
                ('teacher_comment', models.TextField(blank=True, null=True)),
                ('promotion_recommendation', models.TextField(blank=True, null=True)),
                ('is_approved', models.BooleanField(default=False)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_summaries', to=settings.AUTH_USER_MODEL)),
                ('learning_area', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='student_summaries', to='school_app.learningarea')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='termly_summaries', to='school_app.student')),
                ('term', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='student_summaries', to='school_app.term')),
            ],
        ),
        migrations.CreateModel(
            name='Timetable',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('day_of_week', models.IntegerField(choices=[(1, 'Monday'), (2, 'Tuesday'), (3, 'Wednesday'), (4, 'Thursday'), (5, 'Friday'), (6, 'Saturday'), (7, 'Sunday')])),
                ('period', models.IntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('room', models.CharField(blank=True, max_length=20, null=True)),
                ('academic_year', models.CharField(max_length=9)),
                ('term', models.CharField(max_length=20)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('class_id', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='school_app.class')),
                ('subject', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='school_app.learningarea')),
                ('teacher', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='timetable_slots', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['day_of_week', 'period'],
            },
        ),
        migrations.CreateModel(
            name='UserSession',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('access_token', models.TextField()),
                ('refresh_token', models.TextField()),
                ('client_ip', models.GenericIPAddressField()),
                ('user_agent', models.TextField(blank=True, null=True)),
                ('device_fingerprint', models.CharField(blank=True, max_length=64, null=True)),
                ('login_time', models.DateTimeField(auto_now_add=True)),
                ('last_activity', models.DateTimeField(auto_now=True)),
                ('expires_at', models.DateTimeField()),
                ('revoked', models.BooleanField(default=False)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sessions', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.AddIndex(
            model_name='user',
            index=models.Index(fields=['role'], name='school_app__role_76be7f_idx'),
        ),
        migrations.AddIndex(
            model_name='user',
            index=models.Index(fields=['is_active'], name='idx_active_users'),
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['event_time'], name='school_app__event_t_d46c2f_idx'),
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['user'], name='school_app__user_id_99b6a5_idx'),
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['table_name'], name='school_app__table_n_1b0be6_idx'),
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['event_type'], name='school_app__event_t_20be17_idx'),
        ),
        migrations.AddIndex(
            model_name='backuphistory',
            index=models.Index(fields=['backup_start'], name='school_app__backup__0cb800_idx'),
        ),
        migrations.AddIndex(
            model_name='backuphistory',
            index=models.Index(fields=['status'], name='school_app__status_9970b5_idx'),
        ),
        migrations.AddIndex(
            model_name='backuphistory',
            index=models.Index(fields=['expires_on'], name='school_app__expires_9d651b_idx'),
        ),
        migrations.AddIndex(
            model_name='class',
            index=models.Index(fields=['numeric_level'], name='school_app__numeric_8b47e9_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='coursemodule',
            unique_together={('course', 'module_order')},
        ),
        migrations.AddIndex(
            model_name='feestructure',
            index=models.Index(fields=['academic_year'], name='school_app__academi_51c45b_idx'),
        ),
        migrations.AddIndex(
            model_name='feestructure',
            index=models.Index(fields=['class_id'], name='school_app__class_i_4f17d8_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='feestructure',
            unique_together={('academic_year', 'term', 'class_id', 'category')},
        ),
        migrations.AddIndex(
            model_name='generalledger',
            index=models.Index(fields=['gl_date'], name='school_app__gl_date_5d4231_idx'),
        ),
        migrations.AddIndex(
            model_name='generalledger',
            index=models.Index(fields=['account_code'], name='school_app__account_e44d63_idx'),
        ),
        migrations.AddIndex(
            model_name='classsubjectallocation',
            index=models.Index(fields=['teacher'], name='school_app__teacher_e4827f_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='classsubjectallocation',
            unique_together={('academic_year', 'class_id', 'subject')},
        ),
        migrations.AddIndex(
            model_name='bookresource',
            index=models.Index(fields=['school_code'], name='school_app__school__390da5_idx'),
        ),
        migrations.AddIndex(
            model_name='bookresource',
            index=models.Index(fields=['title'], name='school_app__title_fed874_idx'),
        ),
        migrations.AddIndex(
            model_name='bookresource',
            index=models.Index(fields=['authors'], name='school_app__authors_ddbd77_idx'),
        ),
        migrations.AddIndex(
            model_name='bookresource',
            index=models.Index(fields=['subject'], name='school_app__subject_1ad92c_idx'),
        ),
        migrations.AddIndex(
            model_name='bookresource',
            index=models.Index(fields=['book_category'], name='school_app__book_ca_880377_idx'),
        ),
        migrations.AddIndex(
            model_name='bookresource',
            index=models.Index(fields=['is_active'], name='school_app__is_acti_dda45b_idx'),
        ),
        migrations.AddIndex(
            model_name='attendancesession',
            index=models.Index(fields=['session_date'], name='school_app__session_7ca7ed_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='attendancesession',
            unique_together={('session_date', 'class_id', 'period_number', 'session_type')},
        ),
        migrations.AddIndex(
            model_name='notification',
            index=models.Index(fields=['recipient_type', 'recipient_id'], name='school_app__recipie_a89693_idx'),
        ),
        migrations.AddIndex(
            model_name='notification',
            index=models.Index(fields=['status'], name='school_app__status_478e21_idx'),
        ),
        migrations.AddIndex(
            model_name='notification',
            index=models.Index(fields=['sent_at'], name='school_app__sent_at_77a933_idx'),
        ),
        migrations.AddIndex(
            model_name='payrollperiod',
            index=models.Index(fields=['period_code'], name='school_app__period__728818_idx'),
        ),
        migrations.AddIndex(
            model_name='payrollperiod',
            index=models.Index(fields=['status'], name='school_app__status_533069_idx'),
        ),
        migrations.AddIndex(
            model_name='payrollperiod',
            index=models.Index(fields=['pay_date'], name='school_app__pay_dat_ed4f42_idx'),
        ),
        migrations.AddIndex(
            model_name='staff',
            index=models.Index(fields=['department'], name='school_app__departm_f4d22e_idx'),
        ),
        migrations.AddIndex(
            model_name='staff',
            index=models.Index(fields=['status'], name='school_app__status_e8d51d_idx'),
        ),
        migrations.AddIndex(
            model_name='staff',
            index=models.Index(fields=['employment_type'], name='school_app__employm_ed2e3a_idx'),
        ),
        migrations.AddIndex(
            model_name='payrollrecord',
            index=models.Index(fields=['payroll_period'], name='school_app__payroll_2b8430_idx'),
        ),
        migrations.AddIndex(
            model_name='payrollrecord',
            index=models.Index(fields=['staff'], name='school_app__staff_i_35270f_idx'),
        ),
        migrations.AddIndex(
            model_name='payrollrecord',
            index=models.Index(fields=['payment_status'], name='school_app__payment_373f84_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='payrollrecord',
            unique_together={('payroll_period', 'staff')},
        ),
        migrations.AddIndex(
            model_name='leavebalance',
            index=models.Index(fields=['staff'], name='school_app__staff_i_faf119_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='leavebalance',
            unique_together={('staff', 'leave_year', 'leave_type')},
        ),
        migrations.AddIndex(
            model_name='staffleave',
            index=models.Index(fields=['staff'], name='school_app__staff_i_07bf20_idx'),
        ),
        migrations.AddIndex(
            model_name='staffleave',
            index=models.Index(fields=['status'], name='school_app__status_8e275a_idx'),
        ),
        migrations.AddIndex(
            model_name='staffloan',
            index=models.Index(fields=['loan_id'], name='school_app__loan_id_ea4b13_idx'),
        ),
        migrations.AddIndex(
            model_name='staffloan',
            index=models.Index(fields=['staff'], name='school_app__staff_i_9dfd38_idx'),
        ),
        migrations.AddIndex(
            model_name='staffloan',
            index=models.Index(fields=['status'], name='school_app__status_11c975_idx'),
        ),
        migrations.AddIndex(
            model_name='loanrepayment',
            index=models.Index(fields=['loan'], name='school_app__loan_id_7914a9_idx'),
        ),
        migrations.AddIndex(
            model_name='loanrepayment',
            index=models.Index(fields=['repayment_date'], name='school_app__repayme_171e57_idx'),
        ),
        migrations.AddIndex(
            model_name='staffpayrollcomponent',
            index=models.Index(fields=['staff'], name='school_app__staff_i_11b5e6_idx'),
        ),
        migrations.AddIndex(
            model_name='staffpayrollcomponent',
            index=models.Index(fields=['component'], name='school_app__compone_fdbbc2_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='staffpayrollcomponent',
            unique_together={('staff', 'component')},
        ),
        migrations.AlterUniqueTogether(
            name='strand',
            unique_together={('learning_area', 'strand_code')},
        ),
        migrations.AddIndex(
            model_name='student',
            index=models.Index(fields=['admission_no'], name='school_app__admissi_b9ff64_idx'),
        ),
        migrations.AddIndex(
            model_name='student',
            index=models.Index(fields=['current_class'], name='school_app__current_d8bdc0_idx'),
        ),
        migrations.AddIndex(
            model_name='student',
            index=models.Index(fields=['status'], name='school_app__status_1a476b_idx'),
        ),
        migrations.AddIndex(
            model_name='student',
            index=models.Index(fields=['guardian_phone'], name='school_app__guardia_892028_idx'),
        ),
        migrations.AddIndex(
            model_name='student',
            index=models.Index(fields=['user'], name='school_app__user_id_31ed37_idx'),
        ),
        migrations.AddIndex(
            model_name='parent',
            index=models.Index(fields=['parent_id'], name='school_app__parent__493c6c_idx'),
        ),
        migrations.AddIndex(
            model_name='parent',
            index=models.Index(fields=['phone'], name='school_app__phone_386776_idx'),
        ),
        migrations.AddIndex(
            model_name='parent',
            index=models.Index(fields=['email'], name='school_app__email_110fb6_idx'),
        ),
        migrations.AddIndex(
            model_name='disciplineincident',
            index=models.Index(fields=['student'], name='school_app__student_8670c3_idx'),
        ),
        migrations.AddIndex(
            model_name='disciplineincident',
            index=models.Index(fields=['incident_date'], name='school_app__inciden_60602f_idx'),
        ),
        migrations.AddIndex(
            model_name='disciplineincident',
            index=models.Index(fields=['status'], name='school_app__status_38a2ad_idx'),
        ),
        migrations.AddIndex(
            model_name='cbereportcard',
            index=models.Index(fields=['report_id'], name='school_app__report__b37088_idx'),
        ),
        migrations.AddIndex(
            model_name='cbereportcard',
            index=models.Index(fields=['student'], name='school_app__student_46ed85_idx'),
        ),
        migrations.AddIndex(
            model_name='cbereportcard',
            index=models.Index(fields=['class_id'], name='school_app__class_i_bcfbbf_idx'),
        ),
        migrations.AddIndex(
            model_name='cbereportcard',
            index=models.Index(fields=['academic_year', 'term'], name='school_app__academi_70a849_idx'),
        ),
        migrations.AddIndex(
            model_name='cbereportcard',
            index=models.Index(fields=['is_published'], name='school_app__is_publ_05fa05_idx'),
        ),
        migrations.AddIndex(
            model_name='studentacademichistory',
            index=models.Index(fields=['student'], name='school_app__student_3ed611_idx'),
        ),
        migrations.AddIndex(
            model_name='studentacademichistory',
            index=models.Index(fields=['academic_year'], name='school_app__academi_022148_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='studentacademichistory',
            unique_together={('student', 'academic_year')},
        ),
        migrations.AddIndex(
            model_name='studentattendance',
            index=models.Index(fields=['student'], name='school_app__student_846547_idx'),
        ),
        migrations.AddIndex(
            model_name='studentattendance',
            index=models.Index(fields=['attendance_status'], name='school_app__attenda_513102_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='studentattendance',
            unique_together={('session', 'student')},
        ),
        migrations.AddIndex(
            model_name='studentcredit',
            index=models.Index(fields=['student', 'is_utilized'], name='school_app__student_6bf490_idx'),
        ),
        migrations.AddIndex(
            model_name='studentcredit',
            index=models.Index(fields=['credit_expiry'], name='school_app__credit__2cf6ac_idx'),
        ),
        migrations.AddIndex(
            model_name='studentcredit',
            index=models.Index(fields=['student', 'credit_expiry', 'is_utilized'], name='school_app__student_727782_idx'),
        ),
        migrations.AddIndex(
            model_name='studentdisciplinepoints',
            index=models.Index(fields=['student'], name='school_app__student_57147a_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='studentdisciplinepoints',
            unique_together={('student', 'academic_year', 'term')},
        ),
        migrations.AddIndex(
            model_name='studentenrollment',
            index=models.Index(fields=['student'], name='school_app__student_f048ad_idx'),
        ),
        migrations.AddIndex(
            model_name='studentenrollment',
            index=models.Index(fields=['course'], name='school_app__course__65e2de_idx'),
        ),
        migrations.AddIndex(
            model_name='studentenrollment',
            index=models.Index(fields=['enrollment_status'], name='school_app__enrollm_67bc3d_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='studentenrollment',
            unique_together={('student', 'course')},
        ),
        migrations.AddIndex(
            model_name='quizattempt',
            index=models.Index(fields=['enrollment'], name='school_app__enrollm_3a77b4_idx'),
        ),
        migrations.AddIndex(
            model_name='quizattempt',
            index=models.Index(fields=['quiz'], name='school_app__quiz_id_0b77ac_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='quizattempt',
            unique_together={('enrollment', 'quiz', 'attempt_number')},
        ),
        migrations.AddIndex(
            model_name='contentprogress',
            index=models.Index(fields=['enrollment'], name='school_app__enrollm_ee162e_idx'),
        ),
        migrations.AddIndex(
            model_name='contentprogress',
            index=models.Index(fields=['content'], name='school_app__content_f1a834_idx'),
        ),
        migrations.AddIndex(
            model_name='contentprogress',
            index=models.Index(fields=['is_completed'], name='school_app__is_comp_cd0923_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='contentprogress',
            unique_together={('enrollment', 'content')},
        ),
        migrations.AddIndex(
            model_name='studentfeeinvoice',
            index=models.Index(fields=['student'], name='school_app__student_89ddce_idx'),
        ),
        migrations.AddIndex(
            model_name='studentfeeinvoice',
            index=models.Index(fields=['status'], name='school_app__status_7d6cf1_idx'),
        ),
        migrations.AddIndex(
            model_name='studentfeeinvoice',
            index=models.Index(fields=['invoice_date'], name='school_app__invoice_7be5b1_idx'),
        ),
        migrations.AddIndex(
            model_name='feetransaction',
            index=models.Index(fields=['student'], name='school_app__student_1e6f51_idx'),
        ),
        migrations.AddIndex(
            model_name='feetransaction',
            index=models.Index(fields=['payment_date'], name='school_app__payment_7cd8c0_idx'),
        ),
        migrations.AddIndex(
            model_name='feetransaction',
            index=models.Index(fields=['payment_mode'], name='school_app__payment_cbf7c0_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='substrand',
            unique_together={('strand', 'substrand_code')},
        ),
        migrations.AlterUniqueTogether(
            name='competency',
            unique_together={('substrand', 'competency_code')},
        ),
        migrations.AddIndex(
            model_name='summativeassessment',
            index=models.Index(fields=['assessment_code'], name='school_app__assessm_778aa6_idx'),
        ),
        migrations.AddIndex(
            model_name='summativeassessment',
            index=models.Index(fields=['class_id'], name='school_app__class_i_95ce00_idx'),
        ),
        migrations.AddIndex(
            model_name='summativeassessment',
            index=models.Index(fields=['learning_area'], name='school_app__learnin_7e3508_idx'),
        ),
        migrations.AddIndex(
            model_name='summativerating',
            index=models.Index(fields=['assessment'], name='school_app__assessm_36d119_idx'),
        ),
        migrations.AddIndex(
            model_name='summativerating',
            index=models.Index(fields=['student'], name='school_app__student_49dab6_idx'),
        ),
        migrations.AddIndex(
            model_name='summativerating',
            index=models.Index(fields=['competency'], name='school_app__compete_7f13bb_idx'),
        ),
        migrations.AddIndex(
            model_name='summativerating',
            index=models.Index(fields=['rating'], name='school_app__rating_3cd7b0_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='summativerating',
            unique_together={('assessment', 'student', 'competency')},
        ),
        migrations.AlterUniqueTogether(
            name='term',
            unique_together={('academic_year', 'term')},
        ),
        migrations.AlterUniqueTogether(
            name='assessmentwindow',
            unique_together={('term', 'assessment_type')},
        ),
        migrations.AddIndex(
            model_name='termlysummary',
            index=models.Index(fields=['student'], name='school_app__student_254261_idx'),
        ),
        migrations.AddIndex(
            model_name='termlysummary',
            index=models.Index(fields=['term'], name='school_app__term_id_5d0b5b_idx'),
        ),
        migrations.AddIndex(
            model_name='termlysummary',
            index=models.Index(fields=['final_rating'], name='school_app__final_r_ed02f4_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='termlysummary',
            unique_together={('student', 'term', 'learning_area')},
        ),
        migrations.AlterUniqueTogether(
            name='timetable',
            unique_together={('class_id', 'day_of_week', 'period', 'academic_year', 'term')},
        ),
        migrations.AddIndex(
            model_name='usersession',
            index=models.Index(fields=['user'], name='school_app__user_id_937b09_idx'),
        ),
        migrations.AddIndex(
            model_name='usersession',
            index=models.Index(fields=['access_token'], name='school_app__access__ff4b9e_idx'),
        ),
        migrations.AddIndex(
            model_name='usersession',
            index=models.Index(fields=['expires_at'], name='school_app__expires_c7b1d6_idx'),
        ),
    ]
